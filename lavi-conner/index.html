<html>
<head>
<link rel='stylesheet' href='../assets/styles.css'>
  <script language="javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script language="javascript" type="text/javascript" src="../tabletop.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script><link href='https://fonts.googleapis.com/css?family=Playfair+Display:400,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<script src="https://use.typekit.net/fhr0vwf.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>
<script>
//initiate tabletop.js
		window.onload = function() { init() };

  		var public_spreadsheet_url = 		'https://docs.google.com/spreadsheets/d/1RLYef-4vEiFj1hhLPFRmAMbidn1wyTlTZv9X1CZtbb4/pubhtml';

  		function init() {
   			Tabletop.init( { key: public_spreadsheet_url,
                callback: showInfo,
                simpleSheet: true } )
  }
		
  		function showInfo(data, tabletop) {
//update function to be specific to story  			        	
        		function isLavi (data){

//update track         			
        			return data.track == 'lavi-conner';
        			
        		}

//update function        		
        	var filtered = data.filter(isLavi);
        	
        	console.log( filtered )
			
   			for (i = 0; i < filtered.length; i++) {
   			
   			document.getElementById('story01').innerHTML += '<div class="slide"><div class="inner-wrapper"><div class="buttons"><button class="prev"><i class="left-arrow" title="arrow icon"></i></button><button class="next"><i class="right-arrow" title="arrow icon"></i></button></div><div><p class="quote">' + filtered[i].text + "</p></div></div></div>";
   			
   			var slide = document.getElementsByClassName('slide')[i].style.backgroundImage = "url('"+filtered[i].img+"')";
   			
   			$(document).ready(function() {
					$("#story01 .slide").each(function(e) {
        				if (e != 0)
            		$(this).css('display','none');
    			});
    			
    		});
    			
    			$(".next").click(function(){
        			if ($("#story01 div.slide:visible").next().length != 0)
            			$("#story01 div.slide:visible").next().css('display', 'block').prev().css('display','none');
        			else {
            			$("#story01 div.slide:visible").css('display','none');
            			$("#story01 div.slide:first").css('display','block');
        		}
        		return false;
    			});
    
    			$(".prev").click(function(){
        			if ($("#story01 div.slide:visible").prev().length != 0)
           			 	$("#story01 div.slide:visible").prev().css('display','block').next().css('display','none');
        			else {
            			$("#story01 div.slide:visible").css('display','none');
            			$("#story01 div.slide:last").css('display','block');
        		}
        		return false;
    			});
   			
   			
  }
}
</script>
</head>
<body>
<div id="story01"></div>
</body>

</html>